---
import { Image as AstroImage } from 'astro:assets';

const { src, alt, width = 736, height = 552, downloadUrl, ...rest } = Astro.props;
---

<div class="group rounded-img relative block overflow-hidden">
  <AstroImage src={src} alt={alt} width={width} height={height} {...rest} />

  <!-- Download button - bottom right -->
  {
    downloadUrl && (
      <a
        href={downloadUrl}
        download
        class="rounded-img absolute right-3 bottom-3 z-20 flex h-10 w-10 items-center justify-center bg-black/60 text-white opacity-0 transition-all duration-300 group-hover:opacity-100 hover:bg-black/80">
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
          />
        </svg>
      </a>
    )
  }

  <!-- Description overlay - bottom -->
  {
    alt && (
      <div class="not-prose rounded-img absolute right-0 bottom-0 left-0 z-10 bg-gradient-to-t from-black/70 to-transparent p-3 text-sm text-white opacity-0 transition-opacity duration-300 group-hover:opacity-100">
        <p class="font-medium">{alt}</p>
      </div>
    )
  }
</div>
